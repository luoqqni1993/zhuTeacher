function pageInit(){bannerBox=$(".index-banner").find(".swiper-wrapper"),bannerSlide=bannerBox.find(".swiper-slide").clone(!1),indexGoodsBox=$(".index-goods-list"),indexGoodsLi=indexGoodsBox.find("li").clone(!1),searchGoodsBox=$(".search-list"),searchGoodsLi=searchGoodsBox.find("li").clone(!1),getIndex(),$(".search-bar").find("input").change(function(){var o=$(this).val();o||$(".index-search").removeClass("show")}),$(".search-btn").click(function(){var o=$(".search-bar").find("input").val();$.ajax({url:"http://datainfo.duapp.com/shopdata/selectGoodes.php",type:"post",dataType:"JSONP",data:"selectText="+o,success:function(o){if(console.log(o),0==o){var e=$("<p>没有找到相关商品</p>");$(".index-search").append(e)}else loadSearchList(o);$(".index-search").addClass("show")}})})}function getIndex(){$.ajax({url:"http://datainfo.duapp.com/shopdata/getGoods.php",type:"post",dataType:"JSONP",success:function(o){loadIndexList(o)}}),$.ajax({url:"http://datainfo.duapp.com/shopdata/getBanner.php",type:"post",dataType:"JSONP",success:function(o){loadBanner(o)}})}function loadBanner(o){bannerBox.empty();for(var e in o){var n=bannerSlide.clone(!1),a=o[e].goodsID,d=JSON.parse(o[e].goodsBenUrl)[0];n.find("a").attr("data-goodsID",a),n.find("img").attr("src",d),bannerBox.append(n)}new Swiper(".swiper-container",{autoplay:3e3,loop:!0});console.log(o)}function loadIndexList(o){indexGoodsBox.empty();for(var e in o){var n=indexGoodsLi.clone(!1),a=o[e].goodsListImg,d=o[e].goodsName,i=1*o[e].price,s=1*o[e].discount,t=i;0!=s&&(s/=10,t=i/s),t=t.toFixed(2),n.find("img").attr("src",a),n.find(".goods-name").text(d),n.find(".price-box").find("span").text("¥"+i),n.find(".price-box").find("del").text("¥"+t),n.find(".discount").find("span").text(s),indexGoodsBox.append(n)}}function loadSearchList(o){searchGoodsBox.empty()}var bannerBox,bannerSlide,indexGoodsBox,indexGoodsLi,searchGoodsBox,searchGoodsLi;pageInit();