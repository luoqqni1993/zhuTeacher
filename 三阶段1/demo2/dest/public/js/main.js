function getGoodsList(){function a(a){goodsBox.empty();for(var s in a){var o=a[s].goodsListImg,t=a[s].goodsName,e=1*a[s].price,d=a[s].discount/10,n=e;0!=d&&(n=e/(a[s].discount/10)),n=n.toFixed(2);var i=goodsLiDom.clone(!1);i.find("img").attr("src",o),i.find(".goods-name").text(t),i.find(".text").find("span").text("¥ "+e),i.find(".text").find("del").text("¥ "+n),goodsBox.append(i)}}var s="",o=0;console.log("加载页面"),arguments[0]?(s="classID="+arguments[0]+"&pageCode="+pageIndex,o=arguments[0]):s="pageCode="+pageIndex,0==o?goodsListInit():goodsListInit(o),$.ajax({url:"http://datainfo.duapp.com/shopdata/getGoods.php",type:"post",dataType:"JSONP",data:s,success:function(s){var t={classID:o,dataList:s};goodsPageData.push(t),a(s)}})}function getGoodsListBuff(a){var s="";arguments[0]&&(s="classID="+arguments[0]);for(var o in goodsPageData)if(goodsPageData[o].classID==a)return!0;$.ajax({url:"http://datainfo.duapp.com/shopdata/getGoods.php",type:"post",dataType:"JSONP",data:s,success:function(s){var o={classID:a,dataList:s};goodsPageData.push(o)}})}function goodsListInit(a){pageBox.empty();var s=null;s=arguments[0]?"classID="+a+"&pageCode="+pageIndex:"pageCode="+pageIndex,$.ajax({url:"http://datainfo.duapp.com/shopdata/getGoods.php",type:"post",dataType:"JSONP",data:s,success:function(s){if(10==s.length)pageIndex++,arguments[0]?goodsListInit(a):goodsListInit();else if(0==s){pageIndex--;var o=pageIndex+1;if(pageIndex>0){for(var t=0;t<o;t++){var e=pageBoxNumber.clone(!1);e.text(t+1),e.attr("data-type",t+1),pageBox.append(e)}$(".page-btn").show()}else $(".page-btn").hide();bindPage()}else{$(".page-btn").show();10*pageIndex+s.length;pageIndex++;for(var o=pageIndex,t=0;t<o;t++){var e=pageBoxNumber.clone(!1);e.text(t+1),e.attr("data-type",t+1),pageBox.append(e)}bindPage()}}})}function bindPage(){$(".page-btn").click(function(){var a=$(this).attr("data-type"),s=$(".goods-class").find(".active").attr("data-classID");switch(a){case"back":pageIndex--;break;case"next":pageIndex++;break;default:pageIndex=a-1}s?getGoodsList(s):getGoodsList()})}var goodsBox=$(".goods-list"),goodsLiDom=goodsBox.find("li").clone(!1),classBox=$(".goods-class.portrait").find("ul"),classLiDom=classBox.find("li").clone(!1),lClassBox=$(".goods-class.landscape").find("ul"),lClassLiDom=lClassBox.find("li").clone(!1),goodsPageData=[],pageBox=$(".goods-page").find(".number-box"),pageBoxNumber=pageBox.find(".page-btn").clone(!1);$.get("http://datainfo.duapp.com/shopdata/getclass.php",function(a){a=JSON.parse(a),classBox.empty(),lClassBox.empty();for(var s in a){var o=lClassLiDom.clone(!1);0==s&&o.addClass("active"),o.find(".iconfont").html(a[s].icon),o.find(".class-name").text(a[s].className),o.attr("data-classID",a[s].classID);var t=classLiDom.clone(!1);t.attr("data-classID",a[s].classID),getGoodsListBuff(a[s].classID),t.find("a").html(a[s].icon),classBox.append(t)}$(".goods-class").find("li").click(function(){var a=$(this).attr("data-classID");pageIndex=0,getGoodsList(a),$(".goods-class").find(".active").removeClass("active"),$(this).addClass("active")});var e=a.length;classBox.width(.57*e+"rem")}),getGoodsList();var pageIndex=0;